<% content_for :title, translate_model(User) %>

<div class="card card-primary">
  <div class="card-body">  
    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
      <%= render "devise/shared/error_messages", resource: resource %>

      <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
        <div> <%=translate_message(User, :waiting_confirmation) + ': ' + resource.unconfirmed_email %> </div>
      <% end %>

      <div class="row">
        <div class="form-group col-md-4">
          <%= f.label translate_attribute(User, :name) %>
          <%= f.text_field :name, autofocus: true, class: "form-control"  %>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-4">
          <%= f.label translate_attribute(User, :email) %>
          <%= f.email_field :email, autocomplete: "email", class: "form-control"  %>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-4">
          <%= f.label translate_attribute(User, :access_level) %>
          <%= f.collection_select :access_level_id, AccessLevel.order(:id), :id, :description, {}, class: "form-control"  %>
        </div>
      </div>

      <div class="row">
        <div class="form-group col-md-4">          
          <%= f.label translate_attribute(User, :password) %> <i> <%=translate_message(User, :leave_blank_password) %> </i>
          <%= f.password_field :password, autocomplete: "new-password", class: "form-control" %>
        </div>         
      </div>

      <div class="row">
        <div class="form-group col-md-4">          
          <%= f.label translate_attribute(User, :password_confirmation) %><br />
          <%= f.password_field :password_confirmation, autocomplete: "new-password", class: "form-control" %>
        </div>         
      </div>

      <div class="row">
        <div class="form-group col-md-4">          
          <%= f.label translate_attribute(User, :current_password) %> <i> <%=translate_message(User, :password_confirm_changes) %> </i>
          <%= f.password_field :current_password, autocomplete: "current-password", class: "form-control"  %>
        </div>         
      </div>

      <div class="form-group">
        <%= f.submit t('buttons.update') , class: "btn btn-primary" %>
      </div>
          
    <% end %>


    <h3> <%=translate_message(User, :cancel_account) %> </h3>
    <%= button_to translate_attribute(User, :cancel_my_account), registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: "btn btn-danger" %>

    <br /> 

    <%= link_to t('buttons.back') , :back %>
  </div>
</div>
